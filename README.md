![Лого](./logo.svg)

TaskFlux - это распределенный менеджер приоритетных очередей, построенный с упором в отказоустойчивость.

- [Что такое TaskFlux](#что-такое-taskflux)
- [Документация](#документация)
- [Библиотеки взаимодействия](#библиотеки-взаимодействия)
- [Разворачивание](#разворачивание)
- [Вложиться в проект](#вложиться-в-проект)

## Что такое TaskFlux

`TaskFlux` - менеджер приоритетных очередей.
Как обычный менеджер очередей, только каждое _сообщение имеет свой приоритет_.

Создан с упором на отказоустойчивость и работу в контейнерах.

За счет своей расширяемости может использоваться в самых различных приложениях.

## Функциональность

Функциональность приложения:

1. Динамическое создание и удаление очередей
2. Выбор реализации приоритетной очереди
3. Наложение ограничений на операции с очередью
4. Чтение с ожиданием (подписка на очередь)

Полезные фичи:

1. Запуск в отказоустойчивом кластере
2. Хранение данных на диске
3. Возможность конфигурирования различных аспектов поведения
4. Prometheus метрики

## Документация

Ознакомиться с функциональностью можно на страницах:

- [Очереди](./docs/queue.md)
- [Политики очереди](./docs/queue-policies.md)

Документация, касательно использования:

- [Установка](./docs/installation.md)
- [Конфигурирование](./docs/configuration.md)
- [Хранение данных](./docs/persistence.md)
- [Эксплуатация](./docs/maintenance.md) (логирование, мониторинг и т.п.)

Для разработчиков (и кому интересно покопаться):

- [Клиент-серверный протокол](./docs/developer/client-network-protocol.md)
- [Протокол узлов кластера](./docs/developer/inter-node-network-protocol.md)
- [Структура файлов](./docs/developer/file-structure.md)
- [Архитектура и код](./docs/developer/architecture.md)

## Взаимодействие

Приложение поддерживает несколько интерфейсов взаимодействия:

### HTTP

Можно взаимодействовать по HTTP протоколу.
Для этого имеется специальный REST интерфейс.

### Бинарный протокол

У приложения имеется собственный клиент-серверный протокол, построенный поверх TCP.
Его работа описана на [этой странице](./docs/developer/client-network-protocol.md) документации.

На данный момент существует реализация для языка C#.
Пример использования в проекте [интерактивного клиента](./samples/InteractiveConsole).
Сама библиотека расположена в
проекте [TaskFlux.Transport.Tcp.Client](./src/TaskFlux.Transport/TaskFlux.Transport.Tcp.Client) (пока не опубликована в
NuGet).

### gRPC

Имеется поддержка gRPC протокола.
Сервис описан в [этом proto-файле](./src/TaskFlux.Transport/TaskFlux.Transport.Grpc/Proto/taskflux.proto).

## Начало работы

Чтобы попробовать проект:

1. Склонируй git репозиторий проекта

    ```shell
    git clone https://github.com/ashenBlade/TaskFlux.git
    cd TaskFlux
    ```

2. Запусти docker-compose в корне репозитория

   ```shell
   docker compose -f docker-compose.yaml up -d
   ```

   Готово! Сервер запущен.

3. Для тестирования можно запустить консольный клиент

   ```shell
   dotnet run --project samples/InteractiveConsole localhost:9000
   ```

О более подробных инструкциях в
документации: [установка](./docs/installation.md), [конфигурация](./docs/configuration.md)

## Вложиться в проект

Разработка ведется в ветках `feature`.
В ветке `master` расположен готовый к работе код.

Если есть предложения по функциональности - создай новый [Issue](https://github.com/ashenBlade/TaskFlux/issues/new)

## Лицензия

Проект опубликован под лицензией Apache 2.0
