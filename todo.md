# Что в этой ветке

Главная фича - переход на использование сегментированного лога, общий рефакторинг работы с диском.

Шаги:

- [x] `long` вместо `int` для индексов записей лога;

Теперь для терма и индекса записи лога используется `long`.
Также для записи лога был выделен отдельный тип `Lsn` - `Log Sequence Number`.
Вместо с `Term` это всего лишь удобные обертки над примитивным `long`.

- [x] Хранение индекса коммита в памяти, а не на диске;

Индекс коммита теперь хранится в памяти. В файле лога его нет.
Изначально он инициализируется в -1 (Tomb) и актуализируется в процессе работы:
либо существующий лидер передаст данные, либо в процессе старта кластера узлы договорятся между собой.

- [ ] Сегментированный лог вместо единственного лога;


- [ ] Поддержка Prometheus метрик + свои запилить;
- [ ] Отдельный режим работы, когда я единственный узел в кластере;
- [ ] Выравнивание в передаваемых по сети пакетах;
- [ ] Убрать Generic у ConsensusModule - лишняя сложность.
- [ ] Делать проверку на то, что клиент отключился во время обработки запроса (Task.Delay(TimeSpan, client.Accept()).

На след итерацию:

- PreRequestVote
- Поддержка кластера из 1 узла (сразу лидером становлюсь)
- При старте приложения делать таймаут перед запуском таймера, чтобы если были другие узлы кластера, то они успели
  подключиться
