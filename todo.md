# Что в этой ветке

Планируется общий рефакторинг и исправление ошибок, без глобальных фичей и т.д.

Что будет:

- [x] Ошибка когда узел не коннектится к другому узлу - просто встает и все

Решения по факту нет - это проблема уже операционной системы.
Я не могу отследить когда запрос попадает в очередь запросов внутри ОС и следить за ходом его обработки,
поэтому задержки между отправкой запроса присоединения и фактическим принятием запроса - БУДУТ ВСЕГДА.

Но в рамках этой задачи был исправлен критический баг, из-за которого неправильно отслеживался терм у обработчика узлов
в
состоянии лидера - текущим термом считался ТЕКУЩИЙ терм узла, а не терм в котором вошли в состояние лидера.
Из-за этого возникали трудно воспроизводимые баги, когда узел падал без понятных на то причин.

- [ ] Отслеживание лидера
- [ ] Улучшенная обработка ошибок маппинга запросов на команды
- [ ] Stream для ISnapshot
- [ ] Рефакторинг стартапа (как ASP.NET Core) - регистрация сервисов, настройка конфигурации
- [ ] Логирование настроить
- [ ] Рефакторинг работы с диском (незакоммиченные записи на диске хранить)