# Описание фичи

В текущей фиче планирую сделать механизм подтверждений чтения из очереди (при выполнении dequeue команды).
Когда пользователь прочитал из очереди он должен будет отправить ACK пакет (или типа того) и только тогда запись будет
удалена.

# Шаги

1. [ ] Новый пакет для клиента - ACK

Этот пакет будет сигнализировать о том что команду можно реплицировать - типа коммит.
Нужно будет добавить описание в документацию (кто, когда и как ее использует) и сам пакет (+
сериализация/десериализация)

2. [ ] Поменять логику с указанием команды как ReadOnly на флаг ShouldReplicate

Думаю, это лучше описывает логику работы, а не логику работы самой команды.
В частности - dequeue может быть и ReadOnly (когда нужно просто закомитить команду),
а может и нет (когда нужно действительно взять запись из очереди)

3. [ ] Добавление логики обработки ACK на сторону сервера

Пока планирую сделать сам DequeueCommand умным - он сам будет отслеживать свое состояние (прочитал значение или нет).
Будет некая машина состояний.

4. [ ] Обновление логики работы обработчика запросов пользователей

Нужно добавить саму логику возвращения записи обратно в очередь:

- Таймаут
- Исключение какое-нибудь
- Пользователь закрыл соединение

И другие. - Крч, применять саму логику

5. [ ] Восстановление состояния из очереди умное

Теперь при восстановлении состояния нужно не просто создать очередь и пихать в нее записи,
а (условно) создавать множества элементов и поочередно выполнять нужные операции над ними - удаление/добавление/создание
и т.д.

Также нужно позаботиться о том, чтобы при становлении последователем состояние приложение стиралось,
а на лидере - восстанавливалось (иначе могут быть проблемы т.к. сначала команду выполняем и она может быть не
закомичена).